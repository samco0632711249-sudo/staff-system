<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Staff Master System - Final Fixed</title>
    <style>
        :root { --primary: #1e3a8a; --bg-gradient: linear-gradient(135deg, #3b82f6 0%, #2dd4bf 100%); }
        body { font-family: 'Kanit', sans-serif; background: var(--bg-gradient); background-attachment: fixed; margin: 0; padding: 15px; display: flex; justify-content: center; min-height: 100vh; }
        .container { max-width: 550px; width: 100%; background: rgba(255, 255, 255, 0.98); padding: 25px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); position: relative; height: fit-content; }
        h2 { color: var(--primary); text-align: center; font-size: 19px; margin: 0 0 15px 0; }
        .date-display { text-align: center; color: #1e40af; font-weight: 600; margin-bottom: 15px; background: #e0f2fe; padding: 8px; border-radius: 10px; font-size: 15px; }
        .holiday-toggle-bar { display: flex; align-items: center; justify-content: space-between; background: #fffbeb; border: 2px solid #fcd34d; padding: 15px; border-radius: 18px; margin-bottom: 15px; cursor: pointer; }
        .toggle-switch { width: 45px; height: 22px; background: #cbd5e1; border-radius: 50px; position: relative; transition: 0.3s; }
        .toggle-switch::before { content: ""; width: 16px; height: 16px; background: white; border-radius: 50%; position: absolute; top: 3px; left: 3px; transition: 0.3s; }
        .holiday-toggle-bar.active .toggle-switch { background: #f59e0b; }
        .holiday-toggle-bar.active .toggle-switch::before { left: 26px; }
        .staff-row { display: grid; grid-template-columns: 100px 1fr 1fr; gap: 8px; padding: 10px 0; border-bottom: 1px solid #f1f5f9; align-items: center; }
        .staff-name { font-weight: 500; font-size: 14px; color: #334155; }
        select, .locked { width: 100%; padding: 8px; border-radius: 10px; border: 1px solid #cbd5e1; font-family: 'Kanit'; font-size: 12px; outline: none; background: white; box-sizing: border-box; }
        .locked.is-holiday { background: #fff5f5; color: #e03131; border-color: #ffc9c9; text-align: center; font-weight: bold; }
        .locked.special-point { background: #e0f2fe; color: #0369a1; border-color: #7dd3fc; text-align: center; font-weight: bold; }
        .btn-copy { width: 100%; padding: 18px; background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%); color: white; border: none; border-radius: 20px; font-size: 17px; font-weight: bold; cursor: pointer; margin-top: 20px; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>

<div class="container">
    <h2>‚ú® ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ‚ú®</h2>
    <div id="dateDisplay" class="date-display"></div>

    <div id="holidayBar" class="holiday-toggle-bar" onclick="toggleHoliday()">
        <span style="font-weight: 600; color: #92400e;">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå üö©</span>
        <div class="toggle-switch"></div>
    </div>

    <div id="staffList"></div>
    <button class="btn-copy" onclick="copyResult()">üöÄ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏™‡πà‡∏á LINE üöÄ</button>
</div>

<script>
// ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ 10 ‡∏Ñ‡∏ô‡∏´‡∏•‡∏±‡∏Å
const mainStaff = ["‡∏ö‡∏∏‡∏ç‡∏ï‡∏≤", "‡∏ö‡∏¥‡∏ß", "‡∏ô‡∏≤‡∏ß‡∏¥‡∏ô", "‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏≤", "‡∏ß‡∏±‡∏î", "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå", "‡∏û‡∏•", "‡∏Å‡∏¥‡∏ï‡∏ï‡∏¥", "‡πÇ‡∏ã‡πà‡∏™‡∏∏", "‡∏≠‡∏∏‡πÑ‡∏£"];

// ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏∂‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô (‡∏´‡πâ‡∏≤‡∏°‡∏´‡∏≤‡∏¢!)
const holidayDB = {
    0: ["‡∏™‡∏°‡∏±‡∏¢", "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏µ", "‡∏ä‡∏±‡∏ä‡∏ä‡∏±‡∏¢", "‡∏Ç‡∏±‡∏ô‡∏ò‡∏∞‡∏•‡∏µ", "‡∏à‡∏¥‡∏£‡∏™‡∏∏‡∏î‡∏≤", "‡∏≠‡∏¥‡πà‡∏°‡∏ï‡∏µ‡πâ", "‡∏ï‡∏¥‡∏°", "‡∏£‡∏≤‡∏ì‡∏µ", "‡∏Å‡∏±‡∏ç‡∏ç‡∏≤‡∏†‡∏±‡∏ó‡∏£", "‡∏Å‡∏¥‡∏ï‡∏ï‡∏¥"], 
    1: ["‡∏ä‡∏•‡∏ò‡∏¥‡∏ä‡∏≤", "‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏†‡∏≤", "‡πÄ‡∏à‡∏≤‡∏∞", "‡∏•‡∏≥‡∏û‡∏π‡∏ô", "‡∏™‡∏∏‡∏ß‡∏±‡∏ô‡∏ô‡∏≤", "‡∏ä‡∏ô‡∏±‡∏ç‡∏ä‡∏¥‡∏ï‡∏≤", "‡∏≠‡∏ô‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡πå", "‡∏ô‡πâ‡∏≠‡∏á‡∏•‡∏±‡∏î"], 
    2: ["‡∏õ‡∏≤‡∏ì‡∏¥‡∏®‡∏£‡∏≤", "‡∏à‡∏±‡∏ô‡∏ó‡∏ô‡∏≤", "‡∏™‡∏∏‡∏Å‡∏±‡∏ç‡∏ç‡∏≤", "‡πÄ‡∏û‡∏µ‡∏¢‡∏ö", "‡∏ß‡∏∏‡∏í‡∏¥", "‡∏õ‡∏£‡∏¥‡∏¢‡∏ô‡∏∏‡∏ä", "‡∏≠‡∏≤‡∏ó", "‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏≤", "‡∏´‡∏ô‡∏π‡∏ô‡∏¥‡∏î", "‡∏à‡∏¥‡∏î‡∏≤‡∏†‡∏≤", "‡∏à‡∏¥‡∏ï‡∏£‡∏û‡∏á‡∏©‡πå"], 
    3: ["‡πÅ‡∏û‡∏á‡∏®‡∏£‡∏µ", "‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏≤", "‡∏û‡∏•", "‡∏ó‡∏≠‡∏á‡∏™‡∏π‡∏ô", "‡∏õ‡∏£‡∏∞‡πÑ‡∏û", "‡∏õ‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÅ‡∏™‡∏á", "‡∏ò‡∏ß‡∏±‡∏ä", "‡∏õ‡∏£‡∏≤‡πÇ‡∏°‡∏ó‡∏¢‡πå", "‡∏™‡∏∏‡∏ä‡∏≤‡∏î‡∏≤", "‡∏≠‡∏ô‡∏á‡∏Ñ‡πå", "‡∏ß‡∏£‡∏£‡∏ï‡∏≤‡∏†‡∏≤", "‡∏û‡∏¥‡∏°‡∏ß‡∏î‡∏µ"], 
    4: ["‡πÅ‡∏≠‡πä‡∏∞‡πÅ‡∏≠‡πä‡∏∞", "‡∏ì‡∏¥‡∏ä‡∏≤‡∏î‡∏≤", "‡∏™‡∏°‡∏™‡∏≤‡∏¢", "‡∏™‡∏µ‡∏ô‡∏ß‡∏•", "‡∏î‡∏≤‡∏î‡πâ‡∏≤", "‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢", "‡∏•‡∏±‡∏î‡∏î‡∏≤‡∏ß‡∏±‡∏•‡∏¢‡πå", "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå", "‡∏ö‡∏¥‡∏ß", "‡∏ô‡∏≤‡∏ß‡∏¥‡∏ô"], 
    5: ["‡∏Å‡∏£‡∏£‡∏ì‡∏¥‡∏Å‡∏≤", "‡∏ô‡πâ‡∏≥‡∏≠‡πâ‡∏≠‡∏¢", "‡∏ô‡∏¥‡∏î", "‡∏ã‡∏π‡∏•‡∏Å‡∏¥‡∏ü‡∏•‡∏µ", "‡∏ú‡πà‡∏≠‡∏á‡∏®‡∏£‡∏µ", "‡πÅ‡∏™‡∏á", "‡πÅ‡∏ï‡∏á‡πÇ‡∏°", "‡∏ö‡∏∏‡∏ç‡∏ï‡∏≤", "‡∏û‡∏•‡∏≤‡∏Å‡∏£", "‡∏•‡∏≠‡∏¢"], 
    6: ["‡∏ß‡∏±‡∏î", "‡∏™‡∏≤‡∏¢‡πÉ‡∏à", "‡πÄ‡∏Ç‡∏°‡∏¥‡∏Å‡∏≤", "‡∏¢‡∏∏‡∏ß‡∏î‡∏µ", "‡∏ô‡∏¥‡∏ï‡∏¢‡∏≤", "‡∏õ‡∏∏‡πâ‡∏°", "‡∏ô‡∏¥‡∏î‡∏≤", "‡∏•‡∏≥‡∏î‡∏ß‡∏ô", "‡πÇ‡∏ã‡πà‡∏™‡∏∏", "‡∏≠‡∏∏‡πÑ‡∏£"]
};

const lockedTimes = ["07:00 - 19:00 ‚è∞", "08:00 - 20:00 ‚è∞", "09:30 - 20:30 ‚è∞", "10:00 - 22:00 ‚è∞"];
let isHoliday = false;

function toggleHoliday() {
    isHoliday = !isHoliday;
    document.getElementById('holidayBar').classList.toggle('active', isHoliday);
    renderList();
}

function renderList() {
    const today = new Date();
    const day = today.getDay();
    document.getElementById('dateDisplay').innerText = `üìÖ ${today.toLocaleDateString('th-TH', {weekday:'long', day:'numeric', month:'long', year:'numeric'})}`;

    let html = '';
    mainStaff.forEach(name => {
        let p = "‡∏ß‡πà‡∏≤‡∏á", locked = false, customClass = "locked is-holiday";

        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏≤‡∏Å List (‡∏û‡∏• ‡πÅ‡∏•‡∏∞ ‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏≤ ‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ)
        if (holidayDB[day] && holidayDB[day].includes(name)) { 
            p = "üè† ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô"; 
            locked = true; 
        }

        // --- ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏û‡∏• ---
        if (name === "‡∏û‡∏•") {
            if (isHoliday) { p = "üè† ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô"; locked = true; } // ‡∏ñ‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î
            else if (!locked) { p = "3K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞"; } // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏õ 3K
        }

        // --- ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏≤ ---
        if (name === "‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏≤") {
            if (isHoliday) { // ‡∏ñ‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå‡πÑ‡∏õ ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2A
                p = "‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2A"; locked = true; customClass = "locked special-point"; 
            }
        }

        // ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ
        if (name === "‡∏ß‡∏±‡∏î" && !locked) p = "2K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞";
        if (name === "‡πÇ‡∏ã‡πà‡∏™‡∏∏" && (day !== 0 && day !== 6) && !locked) p = "2A ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞";

        html += `<div class="staff-row">
            <div class="staff-name">üë§ ${name}</div>
            <div>${locked ? `<div class="${customClass}">${p}</div>` : 
                `<select class="point-sel">
                    <option value="‡∏ß‡πà‡∏≤‡∏á">‚ö™ ‡∏ß‡πà‡∏≤‡∏á</option>
                    <option value="2K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞" ${p==='2K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞'?'selected':''}>üöõ 2K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞</option>
                    <option value="3K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞" ${p==='3K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞'?'selected':''}>üöõ 3K ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞</option>
                    <option value="2A ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞" ${p==='2A ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞'?'selected':''}>üöú 2A ‡∏ö‡πà‡∏≠‡∏Ç‡∏¢‡∏∞</option>
                    <option value="‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2A" ${p==='‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2A'?'selected':''}>üöΩ ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2A</option>
                    <option value="‡∏´‡∏¢‡∏∏‡∏î">üè† ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô</option>
                </select>`}
            </div>
            <div><select class="time-sel">${lockedTimes.map(t => `<option value="${t}">${t}</option>`).join('')}</select></div>
        </div>`;
    });
    document.getElementById('staffList').innerHTML = html;
}

function copyResult() {
    const today = new Date();
    let text = `üíé ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô üíé\nüìÖ ‡∏ß‡∏±‡∏ô${today.toLocaleDateString('th-TH', {weekday:'long', day:'numeric', month:'long', year:'numeric'})}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n`;
    document.querySelectorAll('.staff-row').forEach((row, i) => {
        const name = row.querySelector('.staff-name').innerText;
        const lStatus = row.querySelector('.locked');
        const p = lStatus ? lStatus.innerText : row.querySelector('.point-sel').value;
        if (p.includes('‡∏´‡∏¢‡∏∏‡∏î')) text += `${i+1}. ${name} ‚ûî [ ${p} ]\n\n`;
        else text += `${i+1}. ${name} ‚ûî ${p} (${row.querySelector('.time-sel').value})\n\n`;
    });
    navigator.clipboard.writeText(text).then(() => alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"));
}
renderList();
</script>
</body>
</html>
